!function(a){"use strict";function b(a,b,c,e){var f=this;f.x=.5,f.y=.5,f.set=function(a,b){try{if("number"!=typeof a)throw"the given x coordinate is not a number";if("number"!=typeof b)throw"the given y coordinate is not a number";if(0>a||a>1)throw"the x coordinate must be a number between 0 and 1";if(0>b||b>1)throw"the y coordinate must be a number between 0 and 1";var c=Math.max(0,Math.min(a,1)),e=Math.max(0,Math.min(b,1));return f.x=c,f.y=e,g(a,b),!0}catch(h){return d.error(f.options,h)}};var g=function(b,c){var d=100*b+"%",e=100*c+"%";a.style.backgroundPosition="top "+e+" left "+d};try{if(e&&("object"!=typeof e||Array.isArray(e)))throw"when passing options, it must be an object";if(f.options={},f.options.show_errors=e&&"undefined"!=typeof e.show_errors?e.show_errors:!0,!d.isElement(a))throw"the given view element is not a DOM element";(b&&c||"number"==typeof b&&"number"==typeof c)&&f.set(b,c)}catch(h){return d.error(f.options,h)}}function c(a,b,c){var e=this;e.x=.5,e.y=.5;var f={possibleEvents:["start","move","stop"],applyFor:function(a,b){-1!==this.possibleEvents.indexOf(a)&&(b=b||[],Array.isArray(b)&&this.callbacks.forEach(function(c,d){"function"==typeof c.cb&&c.eventName===a&&c.cb.apply(window,b)}))},inc:0,callbacks:[]};e.on=function(a,b){try{if("string"!=typeof a)throw"eventName is not a string";if("function"!=typeof b)throw"onChange callback is not a function";if(-1===f.possibleEvents.indexOf(a))throw'event "'+a+'" does not exist';f.inc++;var c=f.inc,g={id:c,eventName:a,cb:b};return f.callbacks.push(g),c}catch(h){return d.error(e.options,h)}},e.off=function(a){try{var b=null;if(f.callbacks.forEach(function(c,d){b||c.id===a&&(b=d)}),null===b)throw"could not find listener for id: "+a;return!!f.callbacks.splice(b,1)}catch(c){return d.error(e.options,c)}},e.set=function(a,b){try{if("number"!=typeof a)throw"the given x coordinate is not a number";if("number"!=typeof b)throw"the given y coordinate is not a number";if(0>a||a>1)throw"the x coordinate must be a number between 0 and 1";if(0>b||b>1)throw"the y coordinate must be a number between 0 and 1";var c=Math.max(0,Math.min(a,1)),f=Math.max(0,Math.min(b,1));return e.x=c,e.y=f,g(c,f),!0}catch(h){return d.error(e.options,h)}};var g=function(a,c){b.style.left=100*a+"%",b.style.top=100*c+"%"},h=function(b){var c=a.getBoundingClientRect(),d=b.pageX-c.left,e=b.pageY-c.top,f=d/c.width,g=e/c.height,h=Math.max(0,Math.min(f,1)),i=Math.max(0,Math.min(g,1));return{x:h,y:i}};e.attachBackgroundPosition=function(a){try{if(!d.isElement(a))throw"the given element is not a DOM element";var b=function(b,c){var d=100*b+"%",e=100*c+"%";a.style.backgroundPosition="top "+e+" left "+d},c=e.on("move",b);return b(e.x,e.y),c}catch(f){return d.error(e.options,f)}},e.detachBackgroundPosition=e.off;try{if(c&&("object"!=typeof c||Array.isArray(c)))throw"when passing options, it must be an object";if(e.options={},e.options.show_errors=c&&"undefined"!=typeof c.show_errors?c.show_errors:!0,e.options.hide_cursor=c&&"undefined"!=typeof c.hide_cursor?c.hide_cursor:!0,e.options.default_x=c&&"undefined"!=typeof c.default_x?c.default_x:.5,e.options.default_y=c&&"undefined"!=typeof c.default_y?c.default_y:.5,e.options.classnames={},e.options.classnames.container_hidecursor=c&&c.classnames&&"undefined"!=typeof c.classnames.container_hidecursor?c.classnames.container_hidecursor:"lfy-focuspoint-edit-hidecursor",!d.isElement(a))throw"the given container element is not a DOM element";if(!d.isElement(b))throw"the given button element is not a DOM element";e.set(e.options.default_x,e.options.default_y),b.addEventListener("mousedown",function(b){var c=h(b);e.set(c.x,c.y),f.applyFor("start",[c.x,c.y]),e.options.hide_cursor&&a.classList.add(e.options.classnames.container_hidecursor);var d=function(a){window.requestAnimationFrame(function(){var b=h(a);e.set(b.x,b.y),f.applyFor("move",[b.x,b.y])})},g=function(b){var c=h(b);f.applyFor("stop",[c.x,c.y]),a.classList.remove(e.options.classnames.container_hidecursor),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",g)})}catch(i){return d.error(e.options,i)}}var d={isElement:function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},error:function(a,b){a.show_errors&&console.error("Focuspoint error:",b)}};a.Focuspoint={View:b,Edit:c}}(window);